<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>build logic richtext generator</title>

<style>
    body {
        margin: 0;
        background: #0b0b0b;
        font-family: Arial, Helvetica, sans-serif;
        color: #eaeaea;
    }

    .container {
        max-width: 900px;
        margin: 40px auto;
        padding: 20px;
    }

    h1 {
        text-align: center;
        font-weight: 700;
        margin-bottom: 20px;
    }

    .toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        background: #151515;
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 16px;
    }

    .color {
        width: 22px;
        height: 22px;
        border-radius: 4px;
        cursor: pointer;
        border: 1px solid #000;
    }

    .btn {
        background: #1f1f1f;
        color: #fff;
        border: 1px solid #333;
        padding: 6px 10px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 13px;
    }

    .btn:hover {
        background: #2a2a2a;
    }

    label {
        display: block;
        margin: 16px 0 6px;
        font-weight: 600;
    }

    textarea, select, .box {
        width: 100%;
        background: #121212;
        color: #fff;
        border: 1px solid #2a2a2a;
        border-radius: 6px;
        padding: 10px;
        font-size: 14px;
        box-sizing: border-box;
    }

    textarea {
        min-height: 90px;
        resize: vertical;
    }

    .preview {
        font-family: monospace;
        min-height: 60px;
    }

    .output {
        font-family: monospace;
        white-space: pre-wrap;
        word-break: break-all;
    }
</style>
</head>
<body>

<div class="container">
    <h1>build logic richtext generator</h1>

    <div class="toolbar">
        <!-- colors -->
        <div class="color" style="background:#000000" onclick="addCode('&0')"></div>
        <div class="color" style="background:#0000AA" onclick="addCode('&1')"></div>
        <div class="color" style="background:#00AA00" onclick="addCode('&2')"></div>
        <div class="color" style="background:#00AAAA" onclick="addCode('&3')"></div>
        <div class="color" style="background:#AA0000" onclick="addCode('&4')"></div>
        <div class="color" style="background:#AA00AA" onclick="addCode('&5')"></div>
        <div class="color" style="background:#FFAA00" onclick="addCode('&6')"></div>
        <div class="color" style="background:#AAAAAA" onclick="addCode('&7')"></div>
        <div class="color" style="background:#555555" onclick="addCode('&8')"></div>
        <div class="color" style="background:#5555FF" onclick="addCode('&9')"></div>
        <div class="color" style="background:#55FF55" onclick="addCode('&a')"></div>
        <div class="color" style="background:#55FFFF" onclick="addCode('&b')"></div>
        <div class="color" style="background:#FF5555" onclick="addCode('&c')"></div>
        <div class="color" style="background:#FF55FF" onclick="addCode('&d')"></div>
        <div class="color" style="background:#FFFF55" onclick="addCode('&e')"></div>
        <div class="color" style="background:#FFFFFF" onclick="addCode('&f')"></div>

        <button class="btn" onclick="addCode('&l')">Bold</button>
        <button class="btn" onclick="addCode('&n')">Underline</button>
        <button class="btn" onclick="addCode('&o')">Italic</button>
        <button class="btn" onclick="addCode('&m')">Strike</button>
        <button class="btn" onclick="addCode('&k')">Obfuscated</button>
        <button class="btn" onclick="addCode('&r')">Reset</button>
    </div>

    <label>minecraft formatting:</label>
    <textarea id="input">&4hello &2world &r!</textarea>

    <label>other options:</label>
    <select>
        <option>wip</option>
    </select>

    <label>preview:</label>
    <div id="preview" class="box preview"></div>

    <label>output:</label>
    <div id="output" class="box output"></div>
</div>

<script>
const colors = {
    0:"#000000",1:"#0000AA",2:"#00AA00",3:"#00AAAA",
    4:"#AA0000",5:"#AA00AA",6:"#FFAA00",7:"#AAAAAA",
    8:"#555555",9:"#5555FF",a:"#55FF55",b:"#55FFFF",
    c:"#FF5555",d:"#FF55FF",e:"#FFFF55",f:"#FFFFFF"
};

function addCode(code) {
    const input = document.getElementById("input");

    const start = input.selectionStart;
    const end = input.selectionEnd;
    const value = input.value;

    input.value =
        value.slice(0, start) +
        code +
        value.slice(end);

    // move cursor AFTER inserted code
    input.selectionStart = input.selectionEnd = start + code.length;

    input.focus();
    update();

}

function update() {
    const text = document.getElementById("input").value;
    document.getElementById("preview").innerHTML = render(text);
    document.getElementById("output").textContent = toFont(text);
}

function render(text) {
    let html = "";
    let color = "#FFFFFF";

    for (let i = 0; i < text.length; i++) {
        if (text[i] === "&" && colors[text[i+1]]) {
            color = colors[text[i+1]];
            i++;
            html += `</span><span style="color:${color}">`;
        } else {
            html += text[i];
        }
    }
    return `<span style="color:${color}">${html}</span>`;
}

function toFont(text) {
    let result = "";
    let current = null;

    for (let i = 0; i < text.length; i++) {
        if (text[i] === "&" && colors[text[i+1]]) {
            if (current) result += "</font>";
            current = colors[text[i+1]];
            result += `<font color="${current}">`;
            i++;
        } else {
            result += text[i];
        }
    }

    if (current) result += "</font>";
    return result;
}

document.getElementById("input").addEventListener("input", update);
update();
</script>

</body>
</html>
